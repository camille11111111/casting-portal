<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Casting Application - Éminente Creative Production</title>
    <link rel="stylesheet" href="eminente-design-system.css">
    <style>
        .form-container {
            max-width: 800px;
            margin: 0 auto;
            padding: var(--space-xl) var(--space-lg);
        }
        
        .form-header {
            text-align: center;
            margin-bottom: var(--space-xxl);
        }
        
        .project-title {
            font-family: var(--font-serif);
            font-size: var(--text-display);
            color: var(--eminente-accent);
            margin-bottom: var(--space-md);
        }
        
        .project-details {
            font-family: var(--font-sans);
            font-size: var(--text-small);
            color: var(--eminente-gray);
            text-transform: uppercase;
            letter-spacing: 1px;
        }
        
        /* Style for embedded Airtable form */
        .airtable-container {
            background: var(--eminente-white);
            border: var(--border);
            padding: var(--space-lg);
            min-height: 600px;
        }
        
        /* Custom form styles */
        .custom-form {
            background: var(--eminente-white);
            border: var(--border);
            padding: var(--space-xl);
        }
        
        .form-section {
            margin-bottom: var(--space-xl);
            padding-bottom: var(--space-xl);
            border-bottom: var(--border);
        }
        
        .form-section:last-child {
            border-bottom: none;
        }
        
        .section-title {
            font-family: var(--font-serif);
            font-size: var(--text-xlarge);
            color: var(--eminente-text);
            margin-bottom: var(--space-lg);
        }
        
        .form-row {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: var(--space-lg);
            margin-bottom: var(--space-lg);
        }
        
        .form-group {
            margin-bottom: var(--space-md);
        }
        
        .required::after {
            content: '*';
            color: var(--eminente-accent);
            margin-left: 4px;
        }
        
        .hidden {
            display: none !important;
        }
        
        .submit-section {
            text-align: center;
            margin-top: var(--space-xxl);
        }
        
        .success-message {
            background: #4CAF50;
            color: white;
            padding: var(--space-lg);
            text-align: center;
            border-radius: 4px;
            margin: var(--space-xl) 0;
        }
    </style>
</head>
<body>
    <!-- Header -->
    <header class="eminente-header">
        <div class="eminente-logo">Éminente Creative Production</div>
        <nav class="eminente-nav">
            <a href="/">Home</a>
            <a href="/casting-portal.html">Casting</a>
            <a href="/about">About</a>
            <a href="/contact">Contact</a>
        </nav>
        <div class="eminente-dot"></div>
    </header>
    
    <div class="form-container">
        <!-- Dynamic Form Header -->
        <div class="form-header">
            <h1 class="project-title" id="projectTitle">Casting Application</h1>
            <p class="project-details" id="projectDetails">Complete the form below</p>
        </div>
        
        <!-- Option 1: Airtable Embed (uncomment to use) -->
        <div id="airtableForm" class="airtable-container hidden">
            <!-- Embed code will be inserted here dynamically -->
        </div>
        
        <!-- Option 2: Custom Form -->
        <form id="customForm" class="custom-form">
            <!-- Basic Information - Always shown -->
            <div class="form-section" data-section="basic">
                <h2 class="section-title">Basic Information</h2>
                <div class="form-row">
                    <div class="form-group">
                        <label class="eminente-label required" for="firstName">First Name</label>
                        <input type="text" id="firstName" name="firstName" class="eminente-input" required>
                    </div>
                    <div class="form-group">
                        <label class="eminente-label required" for="lastName">Last Name</label>
                        <input type="text" id="lastName" name="lastName" class="eminente-input" required>
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label class="eminente-label required" for="email">Email</label>
                        <input type="email" id="email" name="email" class="eminente-input" required>
                    </div>
                    <div class="form-group">
                        <label class="eminente-label required" for="phone">Phone</label>
                        <input type="tel" id="phone" name="phone" class="eminente-input" required>
                    </div>
                </div>
            </div>
            
            <!-- Model-specific fields -->
            <div class="form-section hidden" data-section="model">
                <h2 class="section-title">Model Information</h2>
                <div class="form-row">
                    <div class="form-group">
                        <label class="eminente-label" for="height">Height (cm)</label>
                        <input type="number" id="height" name="height" class="eminente-input">
                    </div>
                    <div class="form-group">
                        <label class="eminente-label" for="agency">Agency</label>
                        <input type="text" id="agency" name="agency" class="eminente-input">
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label class="eminente-label" for="bust">Bust/Chest (cm)</label>
                        <input type="text" id="bust" name="bust" class="eminente-input">
                    </div>
                    <div class="form-group">
                        <label class="eminente-label" for="waist">Waist (cm)</label>
                        <input type="text" id="waist" name="waist" class="eminente-input">
                    </div>
                    <div class="form-group">
                        <label class="eminente-label" for="hips">Hips (cm)</label>
                        <input type="text" id="hips" name="hips" class="eminente-input">
                    </div>
                </div>
            </div>
            
            <!-- Child-specific fields -->
            <div class="form-section hidden" data-section="child">
                <h2 class="section-title">Child & Guardian Information</h2>
                <div class="form-row">
                    <div class="form-group">
                        <label class="eminente-label required" for="childAge">Child's Age</label>
                        <input type="number" id="childAge" name="childAge" class="eminente-input" min="0" max="17">
                    </div>
                    <div class="form-group">
                        <label class="eminente-label required" for="childDOB">Date of Birth</label>
                        <input type="date" id="childDOB" name="childDOB" class="eminente-input">
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label class="eminente-label required" for="guardianName">Parent/Guardian Name</label>
                        <input type="text" id="guardianName" name="guardianName" class="eminente-input">
                    </div>
                    <div class="form-group">
                        <label class="eminente-label required" for="guardianPhone">Guardian Phone</label>
                        <input type="tel" id="guardianPhone" name="guardianPhone" class="eminente-input">
                    </div>
                </div>
                <div class="form-group">
                    <label class="eminente-label" for="workingPapers">Working Papers Status</label>
                    <select id="workingPapers" name="workingPapers" class="eminente-select">
                        <option value="">Select...</option>
                        <option value="current">Current</option>
                        <option value="expired">Expired - Will Renew</option>
                        <option value="none">Not Yet Obtained</option>
                    </select>
                </div>
            </div>
            
            <!-- Commercial/Talent fields -->
            <div class="form-section hidden" data-section="talent">
                <h2 class="section-title">Experience & Skills</h2>
                <div class="form-group">
                    <label class="eminente-label" for="experience">Acting/Performance Experience</label>
                    <textarea id="experience" name="experience" class="eminente-textarea" rows="4"></textarea>
                </div>
                <div class="form-group">
                    <label class="eminente-label">Special Skills</label>
                    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(150px, 1fr)); gap: var(--space-sm);">
                        <label><input type="checkbox" name="skills" value="dancing"> Dancing</label>
                        <label><input type="checkbox" name="skills" value="singing"> Singing</label>
                        <label><input type="checkbox" name="skills" value="sports"> Sports</label>
                        <label><input type="checkbox" name="skills" value="languages"> Languages</label>
                        <label><input type="checkbox" name="skills" value="instruments"> Instruments</label>
                        <label><input type="checkbox" name="skills" value="comedy"> Comedy</label>
                    </div>
                </div>
            </div>
            
            <!-- Portfolio/Links - Optional -->
            <div class="form-section hidden" data-section="portfolio">
                <h2 class="section-title">Portfolio & Social Media</h2>
                <div class="form-row">
                    <div class="form-group">
                        <label class="eminente-label" for="portfolio">Portfolio URL</label>
                        <input type="url" id="portfolio" name="portfolio" class="eminente-input" placeholder="https://...">
                    </div>
                    <div class="form-group">
                        <label class="eminente-label" for="instagram">Instagram Handle</label>
                        <input type="text" id="instagram" name="instagram" class="eminente-input" placeholder="@username">
                    </div>
                </div>
            </div>
            
            <!-- Availability - Common -->
            <div class="form-section hidden" data-section="availability">
                <h2 class="section-title">Availability</h2>
                <div class="form-group">
                    <label class="eminente-label">Available Dates</label>
                    <div id="availabilityDates">
                        <!-- Will be populated dynamically based on project -->
                    </div>
                </div>
                <div class="form-group">
                    <label class="eminente-label" for="location">Location</label>
                    <input type="text" id="location" name="location" class="eminente-input" placeholder="City, State">
                </div>
            </div>
            
            <!-- Submit -->
            <div class="submit-section">
                <button type="submit" class="eminente-btn eminente-btn-primary">
                    Submit Application
                </button>
            </div>
        </form>
        
        <!-- Success Message -->
        <div id="successMessage" class="success-message hidden">
            <h2>Application Submitted Successfully!</h2>
            <p>We'll review your submission and contact you if you're selected.</p>
        </div>
    </div>
    
    <script>
        // Configuration for different casting types
        const formConfigs = {
            'model': {
                title: 'Model Application',
                sections: ['basic', 'model', 'portfolio', 'availability'],
                airtableFormId: 'YOUR_MODEL_FORM_ID'
            },
            'child': {
                title: 'Child Model Application',
                sections: ['basic', 'child', 'availability'],
                airtableFormId: 'YOUR_CHILD_FORM_ID'
            },
            'commercial': {
                title: 'Commercial Talent',
                sections: ['basic', 'talent', 'portfolio', 'availability'],
                airtableFormId: 'YOUR_TALENT_FORM_ID'
            },
            'portmans': {
                title: 'Portmans Campaign',
                subtitle: 'Female Models 18-25',
                sections: ['basic', 'model', 'portfolio'],
                dates: ['August 20, 2025', 'August 21, 2025'],
                airtableFormId: 'YOUR_PORTMANS_FORM_ID'
            },
            'poshpeanut': {
                title: 'Posh Peanut Kids',
                subtitle: 'Children 3-8 years',
                sections: ['basic', 'child'],
                dates: ['August 25-27, 2025'],
                airtableFormId: 'YOUR_POSH_FORM_ID'
            }
        };
        
        // Get parameters from URL
        const urlParams = new URLSearchParams(window.location.search);
        const projectType = urlParams.get('type') || urlParams.get('project') || 'model';
        const useAirtable = urlParams.get('airtable') === 'true';
        
        // Configure form based on type
        function configureForm(type) {
            const config = formConfigs[type] || formConfigs['model'];
            
            // Update header
            document.getElementById('projectTitle').textContent = config.title;
            if (config.subtitle) {
                document.getElementById('projectDetails').textContent = config.subtitle;
            }
            
            // Show/hide sections
            document.querySelectorAll('[data-section]').forEach(section => {
                if (config.sections.includes(section.dataset.section)) {
                    section.classList.remove('hidden');
                } else {
                    section.classList.add('hidden');
                }
            });
            
            // Add specific dates if available
            if (config.dates && document.getElementById('availabilityDates')) {
                const datesHtml = config.dates.map(date => 
                    `<label><input type="checkbox" name="availableDates" value="${date}"> ${date}</label>`
                ).join('<br>');
                document.getElementById('availabilityDates').innerHTML = datesHtml;
            }
            
            // If using Airtable, show embedded form instead
            if (useAirtable && config.airtableFormId) {
                document.getElementById('customForm').classList.add('hidden');
                const airtableContainer = document.getElementById('airtableForm');
                airtableContainer.classList.remove('hidden');
                airtableContainer.innerHTML = `
                    <iframe class="airtable-embed" 
                        src="https://airtable.com/embed/${config.airtableFormId}"
                        frameborder="0" 
                        width="100%" 
                        height="800" 
                        style="background: transparent;">
                    </iframe>
                `;
            }
        }
        
        // Pre-fill form from localStorage or URL params
        function prefillForm() {
            // Check localStorage for returning user
            const savedData = localStorage.getItem('castingFormData');
            if (savedData) {
                const data = JSON.parse(savedData);
                Object.keys(data).forEach(key => {
                    const field = document.getElementById(key);
                    if (field) field.value = data[key];
                });
            }
            
            // Pre-fill from URL parameters
            urlParams.forEach((value, key) => {
                const field = document.getElementById(key);
                if (field) field.value = value;
            });
        }
        
        // Handle form submission
        document.getElementById('customForm').addEventListener('submit', async (e) => {
            e.preventDefault();
            
            const formData = new FormData(e.target);
            const data = Object.fromEntries(formData);
            
            // Save to localStorage for future pre-fill
            localStorage.setItem('castingFormData', JSON.stringify({
                firstName: data.firstName,
                lastName: data.lastName,
                email: data.email,
                phone: data.phone,
                location: data.location
            }));
            
            // Here you would submit to Airtable API
            // For now, just show success
            document.getElementById('customForm').classList.add('hidden');
            document.getElementById('successMessage').classList.remove('hidden');
            
            // Optional: Submit to Airtable via API
            // await submitToAirtable(data, projectType);
        });
        
        // Initialize form
        configureForm(projectType);
        prefillForm();
        
        // Function to submit to Airtable (requires API key)
        async function submitToAirtable(data, type) {
            const config = formConfigs[type];
            if (!config.airtableFormId) return;
            
            // You'll need to set up Airtable API integration
            // This is a placeholder for the actual implementation
            const AIRTABLE_API_KEY = 'YOUR_API_KEY';
            const BASE_ID = 'appuDKVB3PKUbTWsv';
            const TABLE_NAME = 'Casting';
            
            // const response = await fetch(`https://api.airtable.com/v0/${BASE_ID}/${TABLE_NAME}`, {
            //     method: 'POST',
            //     headers: {
            //         'Authorization': `Bearer ${AIRTABLE_API_KEY}`,
            //         'Content-Type': 'application/json'
            //     },
            //     body: JSON.stringify({ fields: data })
            // });
        }
    </script>
</body>
</html>